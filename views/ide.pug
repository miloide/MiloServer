doctype html
html
	include head.pug
	body
		nav.navbar.navbar-default
			.navbar-header
				a.navbar-brand
					img(src='/media/icon.png')
			#navigation.collapse.navbar-collapse
				ul.nav.navbar-nav
					li
						a#projectName(style="cursor:default")
							| Untitled Project
						#editProjectName(style="margin-top: 8px;margin-left: 8px; display: none;")
							.form-group(style="display: inline-flex;")
								input#editProjectInput.form-control(
									type="text",
									placeholder="Untitled Project",
									max-length="30",
									value='Untitled Project')
								button#editProjectSaveButton.btn.btn-xs.btn-success
									i.material-icons save


					li.btn-group
						li.dropdown
							a.dropdown-toggle(style="cursor:pointer", data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
								| File
								span.caret
							ul.dropdown-menu
								li
									a#saveButton(style="cursor:pointer") Save Project
								li
									a#renameButton(style="cursor:pointer") Rename Project
								li
									a#cloneButton(style="cursor:pointer;") Make a copy
								li
									a#reloadButton(style="cursor:pointer" onclick="window.location.reload();") Reload Project
								li
									a#downloadProjectButton(style="cursor:pointer") Download Project
					li.btn-group
						li.dropdown
							a.dropdown-toggle(style="cursor:pointer", data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
								| Workspace
								span.caret
							ul.dropdown-menu
								li
									a.runButton(style="cursor:pointer") Run
								li.divider(role='separator')
								li
									a#trashButton(style="cursor:pointer") Reset
					li.btn-group
						li.dropdown
							a.dropdown-toggle(style="cursor:pointer", data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
								| Datasets
								span.caret
							ul#menuDatasetImport.dropdown-menu
								li
									a(style="cursor:pointer" onclick='Datasets.triggerClick()') Upload
								li.divider(role='separator')
								li
									span &nbsp Built In Datasets
					li
						a.runButton(style="cursor:pointer") Run


				ul.nav.navbar-nav.navbar-right
					li
						h6#statusBar(style="margin-top: 20px;")
							if newProj
								| Your project not saved yet.
								input(id="newProjInput" type="hidden", value="new")
					li
						img#loadingDiv(style="display: none;width:50px;",src="/media/loading.gif")
					li
						button#sidebarToggleButton.navbar-toggle.toggle-right(type='button', data-toggle='sidebar', data-target='.sidebar-right')
							span.icon-bar
							span.icon-bar
							span.icon-bar
					li.btn-group
						li.dropdown
							a.dropdown-toggle(style="cursor:pointer", data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
								i.material-icons account_circle
								span.caret
							ul.dropdown-menu
								if user
									li
										span &nbsp Hi #{user.name}
										br
										span &nbsp Account Type:  #{user.role}
									li
										a(href='/users/projects') Dashboard
									li
										a(href='/users/logout') Logout
								else
									li
										a(href='/users/login') Login
									li
										a(href='/users/register') Register


			br
			ul.nav.nav-tabs
				li.active(role='presentation')
					a#tab_blocks.tabon(style="cursor:pointer") Workspace
				li(role='presentation')
					a#tab_data.taboff(style="cursor:pointer") Data Explorer
				li(role='presentation')
					a#tab_javascript.taboff(style="cursor:pointer") Code
				li(role='presentation')
					a#tab_xml.taboff(style="cursor:pointer") Debug
		#content_blocks.content
			.container-fluid.zero-margin
				.row
					.col-sm-7
						#content_workspace(style="height: 88vh; width: 100%;")
					#outputs.col-sm-5.scroll.zero-margin.pull-right
						#graph_output(style="display: none")
						#chart(style="display:none")
						#drawCanvasDiv(style="display:none")
							canvas#drawCanvas(width='500', height='300')
							a#clear(href='#') Clear
						#misc_output
						#console_holder(style="display: none")
							h3 Console Output
							#console_javascript
		#content_data.content
			.container-fluid
				.row
					.col-sm-4
						h3 Data Explorer
						p Select a dataset from the list below to view or import from the menu.
						//- select#builtInDropdown
						//- button(onclick="Datasets.importBuiltIn();") Import
						//- button(onclick="Datasets.triggerClick();") Upload
						input#fileLoader(type="file", name="files", onchange= "Datasets.uploadDataset(event)",style = "display : none")
						br
						button#dataset_save(style='display:none') Save
						//- button#alertModalTrigger(data-toggle="modal", data-target="#alertModal", style="display:none")
						//- button#confirmModalTrigger(data-toggle="modal", data-target="#confirmModal", style="display:none")
						//- .col-lg-12
						//- h4 Loaded Datasets (click to view)
						ul#dataset_list
					#explorer.col-sm-7
						.col-sm-12
							#dataset_output
		#content_javascript.content
			.container-fluid
				.row
					.col-sm-6
						h3 Generated JS
						pre#source_javascript.code
		#content_xml.content
			.container-fluid
				.row
					.col-sm-12
						h3 Generated XML
						textarea#content_xml_text(wrap="off",cols=100, rows=20)
		#sidebar.col-xs-7.col-sm-5.col-md-5.sidebar.sidebar-right.sidebar-animate(ng-app='SidebarApp' ng-cloak)
			div(ng-controller="SidebarController")
				.heading
					a(onclick="$.sidebar.lockToggle()",style="cursor:pointer")
						i.material-icons#pinHolder lock_open
					| &nbsp;&nbsp;
					a(ng-click="toggleEditor()", ng-if="canModify" style="cursor:pointer")
						i.material-icons#editorToggle {{isEditing ? 'save':'create'}}
					| &nbsp;&nbsp;
					a(ng-click="addPage()", ng-if="canModify && !isEditing" style="cursor:pointer")
						i.material-icons#addPageButton add
					| &nbsp;&nbsp;
					a(ng-click="removePage()", ng-if="canModify && !isEditing" style="cursor:pointer")
						i.material-icons#deletePageButton delete
				#pageEditor(style="{{isEditing?'':'display: none;'}}")
					div#editorContainer
						textarea#sidebarEditor(wrap="off",cols=100, rows=20)
					p {{'Page: ' + (selectedPage + 1)}}

				#pagination-container(ng-if="!isEditing")
					ul.pagination
						li(data-page='-' ng-click="prevPage()")
							a(style="cursor:pointer") <
						li(ng-repeat="page in pages track by $index" ng-click='selectPage($index)' class="{{selectedPage === $index?'active':''}}")
							a(style="cursor:pointer") {{$index+1}}
						li(data-page='+' ng-click="nextPage()")
							a(style="cursor:pointer") >
					div(ng-repeat="page in pages track by $index" style="{{selectedPage === $index?'':'display:none'}}" id="{{'sidebar_page_'+($index+1)}}" data-page='{{$index+1}}', class="page-data")
						div(id="{{'sidebar_content_' + ($index+1)}}" class="col-md-12" ng-bind-html="page  | trust")




		script(src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML" defer)
		include toolbox.html
		#snackbar
		#init_xml_text(style="display:none")
			|	#{starterBlocks}
